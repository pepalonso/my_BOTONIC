"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UnreadMessagesBanner = void 0;
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const arrow_down_svg_1 = tslib_1.__importDefault(require("../../assets/arrow-down.svg"));
const constants_1 = require("../../constants");
const contexts_1 = require("../../contexts");
const environment_1 = require("../../util/environment");
const styles_1 = require("./styles");
const UnreadMessagesBanner = ({ unreadMessagesBannerRef, }) => {
    const { getThemeProperty, webchatState } = (0, react_1.useContext)(contexts_1.WebchatContext);
    const CustomUnreadMessagesBanner = getThemeProperty(constants_1.WEBCHAT.CUSTOM_PROPERTIES.notificationsBannerCustom, undefined);
    const notificationsBannerEnabled = getThemeProperty(constants_1.WEBCHAT.CUSTOM_PROPERTIES.notificationsBannerEnabled, undefined);
    const notificationsEnabled = getThemeProperty(constants_1.WEBCHAT.CUSTOM_PROPERTIES.notificationsEnabled, CustomUnreadMessagesBanner || notificationsBannerEnabled);
    const text = getThemeProperty(constants_1.WEBCHAT.CUSTOM_PROPERTIES.notificationsBannerText, 'unread messages');
    (0, react_1.useEffect)(() => {
        if (webchatState.isWebchatOpen && unreadMessagesBannerRef.current) {
            unreadMessagesBannerRef.current.scrollIntoView({
                behavior: 'smooth',
                block: 'center',
            });
        }
    }, [webchatState.isWebchatOpen, unreadMessagesBannerRef]);
    return ((0, jsx_runtime_1.jsx)(jsx_runtime_1.Fragment, { children: notificationsEnabled ? ((0, jsx_runtime_1.jsx)("div", Object.assign({ ref: unreadMessagesBannerRef }, { children: CustomUnreadMessagesBanner ? ((0, jsx_runtime_1.jsx)(CustomUnreadMessagesBanner, {})) : ((0, jsx_runtime_1.jsxs)(styles_1.ContainerUnreadMessagesBanner, { children: [(0, jsx_runtime_1.jsx)("img", { src: (0, environment_1.resolveImage)(arrow_down_svg_1.default) }), webchatState.numUnreadMessages, " ", text] })) }))) : null }));
};
exports.UnreadMessagesBanner = UnreadMessagesBanner;
//# sourceMappingURL=unread-messages-banner.js.map